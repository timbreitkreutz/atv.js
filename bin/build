#!/bin/bash

# for f in atv.js atv/*.js; do
#   node jslint.mjs $f

#   npx eslint $f || quit "Please fix eslint"
#   npx prettier --trailing-comma none $f --write
# done

# sed -e "s/activate, version/activate, version, pascalize, dasherize, allVariants, actionsFor/" atv.js > atv-test/app/javascript/atv-test.js
# sed -e "s/activate, version/activate, version, actionsFor/" atv.js > atv-test/app/javascript/atv-test.js
# echo "TEST VERSION:"
# tail atv-test/app/javascript/atv-test.js

cd atv-test
bin/rails assets:clobber
bin/rails test:system || exit "Please fix tests"

echo "Build succeeded"
